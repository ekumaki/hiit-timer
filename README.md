# HIITタイマー

高強度インターバルトレーニング (HIIT) のための単一画面タイマー PWA です。運動フェーズと休憩フェーズを色と音、バイブレーションでわかりやすく示し、ポートレートレイアウトでスマートフォンと PC の両方から快適に操作できます。

## 主な特徴
- 運動・休憩の残り秒数を大きく表示し、円形プログレスで進捗を可視化
- フェーズに応じて背景色とテキストコントラストを自動調整 (WORK: 赤, REST: 青, 待機: グレー)
- 3, 2, 1 秒前のカウントダウンおよび開始・終了のビープ音／バイブレーション (ミュートで一括停止)
- 運動秒数・休憩秒数 (5〜600 秒) とラウンド数 (1〜50 回) の設定を即時バリデーション、ロングタップ対応の ± ボタン
- 設定とミュート状態を localStorage に保存し、次回起動時に自動復元
- Screen Wake Lock, Web Audio, Vibration, Service Worker などモバイル向けのブラウザ API に対応
- オフラインでも動作し、GitHub Pages (`/hiit-timer/`) でのホスティングを前提としたビルド設定

## 使い方
1. 運動秒数・休憩秒数・ラウンド数を入力します (±ボタンの長押しで連続加算／減算)。
2. 許容範囲外の値はエラーメッセージで通知され、中央の「開始」ボタンは押下できません。
3. 「開始」ボタンを押すとタイマーが進行し、ボタン表示は「一時停止」に切り替わります。
4. 一時停止中のみ左の「リセット」ボタンが有効です。待機状態へ戻したい場合に使用してください。
5. 右のスピーカーボタンでミュートを切り替えると、音・バイブレーションの両方が一括で停止／再開します。
6. バックグラウンドから復帰しても実時間で残り秒数を補正します。

## PWA とインストール
- 初回アクセス時に Service Worker がインストールされ、以降はオフラインでも起動できます。
- Chrome / Edge などではアドレスバーのインストールアイコンからホーム画面に追加できます。
- iOS Safari では共有メニューから「ホーム画面に追加」を利用してください。

## 開発
- Node.js 18 以上を推奨します。
- 依存関係のインストール: `npm install`
- 開発サーバー起動: `npm run dev`
- 本番ビルド: `npm run build`
- ビルド成果物のプレビュー: `npm run preview`
- PWA アイコンの再生成: `node scripts/generate-icons.mjs`

## デプロイ (GitHub Pages 例)
1. `npm run build` で `dist/` を生成します。
2. `dist/` を `gh-pages` ブランチなど公開対象のブランチに配置し、Pages の公開パスを `/hiit-timer/` に設定します。
3. 変更時は再ビルドした `dist/` を反映させてください。

## 既知の制約・注意点
- Web Audio / Vibration / Screen Wake Lock は対応ブラウザのみで有効です。
- iOS Safari ではバックグラウンドや画面ロック時の音・バイブが抑制される場合があります。
- ミュートを解除した直後は、ブラウザがユーザー操作を要求する場合があります。
- Wake Lock の取得に失敗した際はコンソールに警告を出しつつ通常動作を継続します。
- 端末やブラウザの省電力制御によりタイマー精度がわずかに揺らぐ可能性があります。

## ライセンス
本リポジトリ内のソースコードは依頼主様の判断に従ってご利用ください。
